var P=Object.defineProperty;var j=(t,e,n)=>e in t?P(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var i=(t,e,n)=>(j(t,typeof e!="symbol"?e+"":e,n),n),h=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var p=(t,e,n)=>(h(t,e,"read from private field"),n?n.call(t):e.get(t)),w=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},E=(t,e,n,a)=>(h(t,e,"write to private field"),a?a.call(t,n):e.set(t,n),n);import{m as I,u as C,a as D,r as c,c as L,B as W,U as B,b as M,d as F,e as H,f as V,g as $,h as z,i as J,j as q,q as G,k as Q,l as Y,n as Z,o as s,P as K,T as O,F as U,S as X,M as k,O as _,p as ee,s as te,C as re,t as ne,v as se,w as ae,x as oe,N as ie,y as ce,z as de,A as le}from"./vendor-RulA5oGJ.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&a(u)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();class ue{constructor(){i(this,"navigateHandler");i(this,"currentPathname");i(this,"navigate",(e,n)=>{var a;(a=this.navigateHandler)==null||a.call(this,e,n)});i(this,"init",e=>{this.navigateHandler=e.navigate});i(this,"updatePathname",e=>{this.currentPathname=e});var e;this.currentPathname=((e=globalThis.location)==null?void 0:e.pathname)??"",I(this)}get pathname(){return this.currentPathname}}const x=new ue,pe=()=>{const t=C(),{pathname:e}=D();return c.useEffect(()=>{x.init({navigate:(n,a)=>t(typeof n=="string"?{pathname:n,...a}:n)})},[]),c.useEffect(()=>{x.updatePathname(e)},[e]),null},fe={bold:{woff:B,woff2:M},light:{woff:F,woff2:H},regular:{woff:V,woff2:$},medium:{woff:z,woff2:J}},me=L({brand:W.DEFAULT,fontsUrls:fe});class y extends Error{constructor({errors:n}){super(n[0].message);i(this,"errors");this.errors=n}}const ge=(t={})=>{const e=[];let n=()=>new y({errors:[{message:"Неизвестная ошибка",additionalInfo:{}}]});const a=q.create({timeout:3e3,paramsSerializer:{serialize:r=>G.stringify(r)},...t});return Q(a,{retries:3}),a.subscribeOnError=r=>{e.push(r)},a.initErrorFormatter=r=>{n=r},a.interceptors.response.use(r=>r,r=>(e.forEach(o=>{o(r)}),Promise.reject(n(r)))),a.init=r=>(r&&(a.defaults.baseURL=r.baseURL),a),a},he=401,we=400,Ee=404,_e=500,R={code:we,message:"Ошибка запроса"},S={code:Ee,message:"Сервер не отвечает"},f={code:he,message:"Пользователь не авторизован"},m={httpCode:_e,message:"Неизвестная ошибка"};var d;class xe{constructor(){w(this,d,void 0);this.config={}}init(e){this.config=e}get config(){if(!p(this,d))throw Error("ConfigService is not initialized");return p(this,d)}set config(e){E(this,d,e)}}d=new WeakMap;const g=new xe;class l extends y{}const Re=t=>{var e,n;return((e=t==null?void 0:t.response)==null?void 0:e.status)===f.code?{statusCode:f.code,errors:[{message:f.message,additionalInfo:{}}]}:((n=t.response)==null?void 0:n.data)||{statusCode:m.httpCode,errors:[{message:m.message,additionalInfo:{}}]}},Se=t=>{const e=Re(t),{statusCode:n}=e;if(e.errors&&e.errors.length)return new l({errors:e.errors});switch(n){case R.code:return new l({errors:[{message:R.message,additionalInfo:{}}]});case S.code:return new l({errors:[{message:S.message,additionalInfo:{}}]});default:return new l({errors:[{message:m.message,additionalInfo:{}}]})}},Te=ge(),be=()=>{Te.init({baseURL:g.config.apiUrl}).initErrorFormatter(Se)};class ve{constructor(e){i(this,"captureException",Y);i(this,"init",e=>{Z({dsn:e.monitoringDsn,release:e.monitoringRelease,dist:e.monitoringStand,tracesSampleRate:1})});this.init(e)}}const Ne=new ve(g.config),T=({title:t="Не найдено"})=>s.jsx(K,{title:t}),Ae=new URLSearchParams(window.location.search),{users:b,fileData:v}=JSON.parse(Ae.get("data")||"{}");let N;const Oe=()=>{const[t,e]=c.useState(),n=()=>{const r=b.find(o=>`${o.first_name} ${o.last_name}`===N);window.Telegram.WebApp.sendData(JSON.stringify({data:r,fileData:v,type:"sign"}))},a=r=>{e(r.target.value),N=r.target.value,window.Telegram.WebApp.MainButton.show()};return c.useEffect(()=>{window.Telegram.WebApp.MainButton.setText("Отправить"),window.Telegram.WebApp.MainButton.onClick(n),window.Telegram.WebApp.ready()},[]),c.useEffect(()=>{t||window.Telegram.WebApp.MainButton.hide()},[t]),s.jsxs("div",{style:{padding:"50px 12px 12px",display:"grid",gap:20},children:[s.jsx(O,{variant:"h4",children:"Выберите получателя для файла:"}),s.jsx("div",{style:{maxWidth:300},children:s.jsx(U,{variant:"h4",color:"info",children:v.fileName})}),s.jsx(X,{label:"Получатель",placeholder:"Выберите получателя",value:t,onChange:a,children:b.map(r=>s.jsxs(k,{value:`${r.first_name} ${r.last_name}`,children:[r.first_name," ",r.last_name]}))})]})},Ue=new URLSearchParams(window.location.search),{user:ye,fileData:A}=JSON.parse(Ue.get("data")||"{}"),Pe=()=>{const t=()=>{window.Telegram.WebApp.MainButton.showProgress(),setTimeout(()=>{window.Telegram.WebApp.sendData(JSON.stringify({data:{user:ye,fileData:A}}))},2e3)};return c.useEffect(()=>{window.Telegram.WebApp.MainButton.setText("Подписать"),window.Telegram.WebApp.MainButton.onClick(t),window.Telegram.WebApp.MainButton.show(),window.Telegram.WebApp.ready()},[]),s.jsxs("div",{style:{padding:"50px 12px 12px",display:"grid",gap:20},children:[s.jsx(O,{variant:"h4",children:"Подписание файла:"}),s.jsx("div",{style:{maxWidth:300},children:s.jsx(U,{variant:"h4",color:"info",children:A.fileName})})]})},je=[{path:"/select",element:s.jsx(_,{}),children:[{path:"*",element:s.jsx(T,{})},{index:!0,element:s.jsx(Oe,{})}]},{path:"/sign",element:s.jsx(_,{}),children:[{path:"*",element:s.jsx(T,{})},{index:!0,element:s.jsx(Pe,{})}]}];g.init({apiUrl:window.__ENV__.PUBLIC_API_URL,monitoringDsn:window.__ENV__.PUBLIC_SENTRY_DSN,monitoringStand:window.__ENV__.PUBLIC_SENTRY_ENV,monitoringRelease:window.__ENV__.PUBLIC_RELEASE_TAG});be();ce(typeof window>"u");const Ie=ee(()=>{const t=te(je);return s.jsxs(re,{imagesMap:{noDataImgSrc:ne,defaultErrorImgSrc:se,outdatedReleaseErrorImgSrc:ae},captureException:Ne.captureException,children:[s.jsx(pe,{}),s.jsxs(oe,{theme:me,children:[s.jsx(ie,{}),t]})]})}),Ce=()=>{const t=document.getElementById("root");if(!t)throw Error("Рут не найден");de(t).render(s.jsx(c.StrictMode,{children:s.jsx(le,{children:s.jsx(Ie,{})})}))};Ce();
//# sourceMappingURL=index-b7lxAtBj.js.map
